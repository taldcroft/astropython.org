{% extends "base.html" %}

{% block first_column %}
<div id="mainCol" class="fix"><a name="main"></a>
    <div class="post">
        <h2>{{ category|capfirst }} entries</h2>
        Sort by <a href="{{ category }}s?sort=title">Title</a>, <a href="{{ category }}s?sort=updated">Date</a>, or <a href="{{ category }}s?sort=tag">Tags</a> 
        {% if blog_entries %}
            <table>
            <tr> <th> <a href="{{ category }}s?sort=title">Title</a> </th> 
                 {% ifequal category "resource" %}
                   <th> Description </th> 
                   <th> Homepage </th> 
                 {% endifequal %}
                <th> <a href="{{ category }}s?sort=updated">Date</a> </th> 
                <th> <a href="{{ category }}s?sort=tag">Tags</a> </th> 
                 </tr>
            {% for blog in blog_entries %}
              <tr> <td> <a href="{{ blog.permalink }}" alt="{{ blog.title }}">{{ blog.title }}</a> </td>
                  {% ifequal category "resource" %}
                    <td> {{ blog.resource_description }}</td> 
                    <td> <a href="{{ blog.resource_URL}}">{{ blog.resource_URL|slice:":18" }}...</a></td> 
                  {% endifequal %}
                   <td> {{ blog.updated.year }}-{{ blog.updated.month }}-{{ blog.updated.day }} </td>
                   <td> {% for tag in blog.tags %} <a href="/tag/{{ tag }}">{{ tag }}</a> {% endfor %} </td>
              </tr>
            {% endfor %}
            </table>
        {% else %}
            <table>
                {% for tag_blog_entry in tag_blog_entries %}
                  <tr> <th colspan=2> {{ tag_blog_entry.tag }} </th> </tr>
                  {% for blog in tag_blog_entry.blog_entries %}
                    <tr> <td> <a href="{{ blog.permalink }}" alt="{{ blog.title }}">{{ blog.title }}</a> </td>
                      {% ifequal category "resource" %}
                        <td> {{ blog.resource_description }}</td> 
                        <td> <a href="{{ blog.resource_URL}}">{{ blog.resource_URL|slice:":18" }}...</a></td> 
                      {% endifequal %}
                     <td> {{ blog.updated.year }}-{{ blog.updated.month }}-{{ blog.updated.day }} </td>
                    </tr>
                  {% endfor %}
                {% endfor %}
            </table>
        {% endif %}
    </div>

{% include 'pager.html' %}
</div>
{% endblock %}
